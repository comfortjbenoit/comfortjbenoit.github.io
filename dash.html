<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Intranet Dashboard</title>
  <meta name="theme-color" content="#111827" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { borderRadius: { '2xl': '1rem' }}}};
  </script>
  <style>
    html, body { height: 100%; background: #f8fafc; }
    .aspect-video { position: relative; padding-top: calc(9/16 * 100%); }
    .aspect-video > * { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border: 0; }
    .container { max-width: 72rem; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }
    @media (min-width: 640px){ .container { padding-left: 1.5rem; padding-right: 1.5rem; } }
    @media (min-width: 1024px){ .container { padding-left: 2rem; padding-right: 2rem; } }
  </style>
</head>
<body class="min-h-screen">

  <!-- Top Bar -->
  <div class="bg-white border-b border-gray-200">
    <div class="container">
      <div class="flex items-center gap-4 py-4">
        <div class="flex items-center gap-2">
          <div class="h-9 w-9 rounded-xl bg-gray-900 text-white flex items-center justify-center font-bold">FT</div>
          <div id="orgName" class="text-xl font-semibold text-gray-900">Food Town Intranet</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Location banner -->
  <div id="locBanner" class="hidden bg-amber-50 border-b border-amber-200">
    <div class="container"><div class="py-2 text-sm text-amber-900" id="locMsg"></div></div>
  </div>

  <!-- Main -->
  <main class="container">
    <div id="app" class="py-6"></div>
  </main>

  <!-- Footer -->
  <footer class="mt-2 border-t border-gray-200 bg-white">
    <div class="container">
      <div class="py-4 text-xs text-gray-500">
        Â© <span id="year"></span> <span id="orgNameFooter">Food Town Intranet</span>
      </div>
    </div>
  </footer>

  <div class="md:hidden sticky bottom-0 inset-x-0 bg-white border-t border-gray-200 p-2 flex justify-between z-10" id="mobileTabs"></div>

  <script>
    const NAV_ITEMS = [
      { path: '/', label: 'Dashboard' },
      { path: '/reports', label: 'Reports' },
      { path: '/manuals', label: 'Manuals' },
      { path: '/planograms', label: 'Planograms' },
      { path: '/corporate', label: 'Corporate' },
      { path: '/store', label: 'Store' },
      { path: '/booth', label: 'Booth' },
      { path: '/scan', label: 'Scan' },
      { path: '/receiving', label: 'Receiving' },
    ];
    const $ = (sel) => document.querySelector(sel);
    const el = (tag, cls, html) => { const e=document.createElement(tag); if(cls)e.className=cls; if(html!=null)e.innerHTML=html; return e; };

    /**************
     * LIVE MAPS REPLACEMENT (TranStar traffic + KTRK radar image)
     **************/
    function renderLiveMaps(container){
      container.innerHTML = '';
      const grid = el('div','grid grid-cols-1 lg:grid-cols-2 gap-5');

      // Traffic (TranStar gif)
      const traffic = el('div','bg-white shadow-sm rounded-2xl p-5 border border-gray-100');
      traffic.innerHTML = `
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold text-gray-800">Live Traffic (TranStar)</h3>
        </div>
        <div class="aspect-video rounded-xl overflow-hidden border">
          <img src="http://traffic.houstontranstar.org/data/layers/houston_region_pub_layer_radar.gif" alt="Houston TranStar Traffic" class="w-full h-full object-cover"/>
        </div>`;
      grid.appendChild(traffic);

      // Weather Radar (KTRK 5-day image)
      const radar = el('div','bg-white shadow-sm rounded-2xl p-5 border border-gray-100');
      radar.innerHTML = `
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold text-gray-800">Weather Radar (KTRK)</h3>
        </div>
        <div class="aspect-video rounded-xl overflow-hidden border">
          <img src="https://cdns.abclocal.go.com/three/ktrk/weather/WWW_KTRK_5DAY_HD.jpg?w=300&r=16%3A9" alt="KTRK Weather" class="w-full h-full object-cover"/>
        </div>`;
      grid.appendChild(radar);

      container.appendChild(grid);
    }

    /**************
     * DASHBOARD (simplified just to demo maps swap)
     **************/
    function renderDashboard(){
      const app = $('#app'); app.innerHTML = '';
      const header = el('div','mb-5','<h1 class="text-2xl font-semibold text-gray-900">Dashboard</h1>');
      app.appendChild(header);
      const rightCol = el('div'); renderLiveMaps(rightCol);
      app.appendChild(rightCol);
    }

    function renderRoute(route){
      $('#orgNameFooter').textContent = "Food Town Intranet";
      $('#year').textContent = new Date().getFullYear();
      if (route === '/') return renderDashboard();
    }

    function buildNav(){
      const tabs = $('#mobileTabs'); tabs.innerHTML = '';
      for (const item of NAV_ITEMS){
        const m = el('a','flex-1 text-center text-xs font-medium text-gray-700 py-2 hover:bg-gray-100 rounded-lg', item.label);
        m.href = '#' + item.path;
        tabs.appendChild(m);
      }
    }

    function renderAll(){ buildNav(); renderRoute('/'); }
    renderAll();
  </script>
</body>
</html>
